CREATE TABLE IF NOT EXISTS USERS_TABLE
(
    USER_ID  INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMAIL    VARCHAR(40) NOT NULL,
    LOGIN    VARCHAR(40) NOT NULL,
    NAME     VARCHAR(40),
    BIRTHDAY DATE
    );


CREATE TABLE IF NOT EXISTS TABLE_FILMS
(
    FILM_ID      INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME         VARCHAR(255),
    DESCRIPTION  VARCHAR(255),
    RELEASE_DATE DATE,
    DURATION     VARCHAR(10),
    MPA_ID      INTEGER REFERENCES MPA (id),
    GENRES_ID    INTEGER REFERENCES GENRES (id)
    );

CREATE TABLE IF NOT EXISTS TABLE_MPA
(
    MPAA_ID  INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME    VARCHAR
);

CREATE TABLE IF NOT EXISTS TABLE_GENRES
(
    GENRES_ID  INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY NOT NULL,
    NAME    VARCHAR NOT NULL
);


CREATE TABLE IF NOT EXISTS FRIENDSHIP (
 id    BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
 user_id    BIGINT REFERENCES users_table (user_id) ON DELETE CASCADE,
 friend_id  BIGINT REFERENCES users_table (user_id) ON DELETE CASCADE,
 UNIQUE (user_id, friend_id)
 );

CREATE TABLE IF NOT EXISTS LIKES
(
    USER_ID BIGINT,
    FILM_ID BIGINT,
    CONSTRAINT LIKES_ID PRIMARY KEY (USER_ID, FILM_ID)
    );




